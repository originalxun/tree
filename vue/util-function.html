<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3-å·¥å…·å‡½æ•° | æ ‘ä¹‹æœ¨</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="never give up">
    
    <link rel="preload" href="/tree-blod/assets/css/0.styles.12565279.css" as="style"><link rel="preload" href="/tree-blod/assets/js/app.c79a225f.js" as="script"><link rel="preload" href="/tree-blod/assets/js/2.6ca15a82.js" as="script"><link rel="preload" href="/tree-blod/assets/js/13.a492b3c4.js" as="script"><link rel="prefetch" href="/tree-blod/assets/js/10.013edf68.js"><link rel="prefetch" href="/tree-blod/assets/js/11.3fb9b15d.js"><link rel="prefetch" href="/tree-blod/assets/js/12.7d9d1341.js"><link rel="prefetch" href="/tree-blod/assets/js/3.98ae3056.js"><link rel="prefetch" href="/tree-blod/assets/js/4.4466df2d.js"><link rel="prefetch" href="/tree-blod/assets/js/5.02018b5a.js"><link rel="prefetch" href="/tree-blod/assets/js/6.bd7b0c2a.js"><link rel="prefetch" href="/tree-blod/assets/js/7.2c2a7d27.js"><link rel="prefetch" href="/tree-blod/assets/js/8.c02ba4af.js"><link rel="prefetch" href="/tree-blod/assets/js/9.02d545b6.js">
    <link rel="stylesheet" href="/tree-blod/assets/css/0.styles.12565279.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tree-blod/" class="home-link router-link-active"><!----> <span class="site-name">æ ‘ä¹‹æœ¨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/vue/" class="nav-link router-link-active">
  vue.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/node/" class="nav-link">
  node.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/react/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/js/" class="nav-link">
  javascript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="åç«¯" class="mobile-dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/spring/" class="nav-link">
  spring
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/dbase/" class="nav-link">
  æ•°æ®åº“
</a></div><div class="nav-item"><a href="/tree-blod/algorithm/" class="nav-link">
  æ•°æ®ç»“æ„å’Œç®—æ³•
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/vue/" class="nav-link router-link-active">
  vue.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/node/" class="nav-link">
  node.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/react/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/js/" class="nav-link">
  javascript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="åç«¯" class="mobile-dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/spring/" class="nav-link">
  spring
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/dbase/" class="nav-link">
  æ•°æ®åº“
</a></div><div class="nav-item"><a href="/tree-blod/algorithm/" class="nav-link">
  æ•°æ®ç»“æ„å’Œç®—æ³•
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue3-å·¥å…·å‡½æ•°"><a href="#vue3-å·¥å…·å‡½æ•°" class="header-anchor">#</a> vue3-å·¥å…·å‡½æ•°</h1> <p>å­¦ä¹ äººï¼šæœ¨æœ¨</p> <p>å­¦ä¹ æ—¶é—´ğŸ“…: 2022.01.09 2045:51</p> <p>å­¦ä¹ åœ°å€ï¼š</p> <p>æ¦‚è¿°ï¼š</p> <ol><li>å¦‚ä½•æŸ¥çœ‹vue-nextæºç ï¼›</li> <li>vue-nextä¸­ä½¿ç”¨çš„å·¥å…·å‡½æ•°ï¼›</li> <li>æ€»ç»“ä¸æœŸæœ›</li></ol> <h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="header-anchor">#</a> å‡†å¤‡</h2> <h3 id="æ‰“åŒ…æ„å»ºä»£ç "><a href="#æ‰“åŒ…æ„å»ºä»£ç " class="header-anchor">#</a> æ‰“åŒ…æ„å»ºä»£ç </h3> <p>æºç ä¸­è¯¥æ–‡ä»¶ä¸ºtsæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘è‡ªå·±æš‚æ—¶æ²¡æœ‰tsçš„åŸºç¡€ã€‚æ‰€ä»¥éœ€è¦å°†tsæ–‡ä»¶è½¬æ¢ä¸ºjsæ–‡ä»¶ã€‚</p> <p>ç¯å¢ƒï¼šnode.jsï¼š12.22.5ã€npmï¼š6.14.14</p> <p>ä¸‹è½½ç©vue-nextæ–‡ä»¶åï¼Œåœ¨ç¼–è¯‘å™¨ä¸­æ‰“å¼€è¿›å…¥åˆ°vue-nextç›®å½•ä¸­ã€‚è¾“å…¥å‘½ä»¤</p> <div class="language-node extra-class"><pre class="language-text"><code>-- æ„å»ºåŒ…åä¸º shared çš„ç›®å½•ï¼ˆæˆ‘ä»¬åªéœ€è¦è¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼‰
npm run build shared 

-- æ³¨ï¼šæ„å»ºåŒ…ååŒ…å«run-timeçš„ç›®å½•
npm run build run-time --all
</code></pre></div><p>æ„å»ºå®Œäº†ä¹‹åä¼šåœ¨sharedç›®å½•ä¸‹ï¼Œæ–°å¢ä¸€ä¸ªdistç›®å½•ã€‚åœ¨ç›®å½•ä¸­æ‰¾åˆ° shared.esm-bundle.jsæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„jsæ–‡ä»¶ã€‚æ„å»ºå®Œäº†ä¹‹åæˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸‹è¯¥æ–‡ä»¶ä¸­çš„ä¸€äº›æ–¹æ³•ã€‚</p> <p><img src="C:%5CUsers%5CPOET%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220109210426739.png" alt="image-20220109210426739"></p> <h3 id="ç”Ÿæˆsource-mapè°ƒè¯•vue-nextæºç "><a href="#ç”Ÿæˆsource-mapè°ƒè¯•vue-nextæºç " class="header-anchor">#</a> ç”Ÿæˆsource mapè°ƒè¯•vue-nextæºç </h3> <p><strong>ä¸ºä»€ä¹ˆè¦ç”¨Source Mapï¼Ÿ</strong></p> <ul><li>æºç è¿›è¡Œå‹ç¼©è½¬æ¢ï¼Œå‡å°‘æ–‡ä»¶æ•°é‡</li> <li>å‡å°‘httpçš„è¯·æ±‚æ¬¡æ•°</li> <li>å‡å°‘æ–‡ä»¶çš„ä½“ç§¯</li></ul> <p><strong>ä»€ä¹ˆæ˜¯Source Mapï¼Ÿ</strong></p> <blockquote><p>Source Mapå°±æ˜¯ä¸€ä¸ªä¿¡æ¯æ–‡ä»¶ï¼Œé‡Œé¢å­˜å‚¨ç€ä½ç½®ä¿¡æ¯ã€‚å¯ä»¥ç†è§£ä¸ºè½¬æ¢åçš„ä»£ç ä½ç½®ä¸è½¬æ¢å‰çš„ä»£ç ä½ç½®ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚</p></blockquote> <p>æ³¨ï¼šè¿™æ ·ä¼šè®©æ„å»ºé€Ÿåº¦å˜æ…¢ã€‚</p> <p>1.åœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p> <div class="language-NODE extra-class"><pre class="language-text"><code>npm run dev:sourcemap
</code></pre></div><p>2.åœ¨vue-nextç›®å½•ä¸‹ï¼Œæ‰¾åˆ°package.jsonæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­çš„scriptå‡ºæ·»åŠ ä»¥ä¸‹ä»£ç ã€‚è¿™ç§æ–¹å¼éœ€è¦æ‰‹åŠ¨å†æ„å»ºä¸€æ¬¡ï¼Œå°†è„šæœ¬ç”Ÿæˆã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string-property property">&quot;dev:sourcemap&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/dev.js --sourcemap&quot;</span>
</code></pre></div><p><img src="C:%5CUsers%5CPOET%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220109212045915.png" alt="image-20220109212045915"></p> <p>æ„å»ºå®Œäº†ä¹‹åä¼šç”Ÿæˆä¸€ä¸ªvue.global.jsçš„æ–‡ä»¶ã€‚</p> <p><img src="C:%5CUsers%5CPOET%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220109212307969.png" alt="image-20220109212307969"></p> <h2 id="å·¥å…·å‡½æ•°"><a href="#å·¥å…·å‡½æ•°" class="header-anchor">#</a> å·¥å…·å‡½æ•°</h2> <h3 id="_1-empty-obj-ç©ºå¯¹è±¡"><a href="#_1-empty-obj-ç©ºå¯¹è±¡" class="header-anchor">#</a> 1.EMPTY_OBJ --- ç©ºå¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">EMPTY_OBJ</span> <span class="token operator">=</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span>
    <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Object.freezeï¼ˆï¼‰æ–¹æ³•å¯ä»¥<strong>å†»ç»“</strong>ä¸€ä¸ªå¯¹è±¡ã€‚ä¸€ä¸ªè¢«å†»ç»“çš„å¯¹è±¡å†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ï¼›å†»ç»“äº†ä¸€ä¸ªå¯¹è±¡åˆ™ä¸èƒ½å‘è¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ï¼Œä¹Ÿä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹è¯¥å¯¹è±¡å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼ã€‚æ­¤å¤–ï¼Œå†»ç»“ä¸€ä¸ªå¯¹è±¡åè¯¥å¯¹è±¡çš„åŸå‹ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚freeze()è¿”å›å’Œä¼ å…¥çš„å‚æ•°ç›¸åŒçš„å¯¹è±¡ã€‚</p></blockquote> <p>ä¸¾ä¸ªæ —å­ ğŸŒ°</p> <div class="language- extra-class"><pre class="language-text"><code>var obj = {
  prop: function() {},
  foo: 'bar'
};

// æ–°çš„å±æ€§ä¼šè¢«æ·»åŠ , å·²å­˜åœ¨çš„å±æ€§å¯èƒ½
// ä¼šè¢«ä¿®æ”¹æˆ–ç§»é™¤
obj.foo = 'baz';
obj.lumpy = 'woof';
delete obj.prop;

// ä½œä¸ºå‚æ•°ä¼ é€’çš„å¯¹è±¡ä¸è¿”å›çš„å¯¹è±¡éƒ½è¢«å†»ç»“
// æ‰€ä»¥ä¸å¿…ä¿å­˜è¿”å›çš„å¯¹è±¡ï¼ˆå› ä¸ºä¸¤ä¸ªå¯¹è±¡å…¨ç­‰ï¼‰
var o = Object.freeze(obj);

o === obj; // true
Object.isFrozen(obj); // === true

// ç°åœ¨ä»»ä½•æ”¹å˜éƒ½ä¼šå¤±æ•ˆ
obj.foo = 'quux'; // é™é»˜åœ°ä¸åšä»»ä½•äº‹
// é™é»˜åœ°ä¸æ·»åŠ æ­¤å±æ€§
obj.quaxxor = 'the friendly duck';
</code></pre></div><h3 id="_2-empty-arr-ç©ºæ•°ç»„"><a href="#_2-empty-arr-ç©ºæ•°ç»„" class="header-anchor">#</a> 2.EMPTY_ARR --- ç©ºæ•°ç»„</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">EMPTY_ARR</span> <span class="token operator">=</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-noop-ç©ºå‡½æ•°"><a href="#_3-noop-ç©ºå‡½æ•°" class="header-anchor">#</a> 3.NOOP --- ç©ºå‡½æ•°</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">NOOP</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-no-æ°¸è¿œè¿”å›falseçš„å‡½æ•°"><a href="#_4-no-æ°¸è¿œè¿”å›falseçš„å‡½æ•°" class="header-anchor">#</a> 4.NO --- æ°¸è¿œè¿”å›falseçš„å‡½æ•°</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * Always return false.
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">NO</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-ison-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯-on-å¼€å¤´-å¹¶ä¸”-on-åé¦–å­—æ¯ä¸æ˜¯å°å†™å­—æ¯"><a href="#_5-ison-åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯-on-å¼€å¤´-å¹¶ä¸”-on-åé¦–å­—æ¯ä¸æ˜¯å°å†™å­—æ¯" class="header-anchor">#</a> 5.isON --- åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯ on å¼€å¤´ï¼Œå¹¶ä¸” on åé¦–å­—æ¯ä¸æ˜¯å°å†™å­—æ¯</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> onRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on[^a-z]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">isOn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> onRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6-ismodellistener-ç›‘å¬å™¨"><a href="#_6-ismodellistener-ç›‘å¬å™¨" class="header-anchor">#</a> 6.isModelListener --- ç›‘å¬å™¨</h3> <p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯ä»¥onUpdate:å¼€å¤´</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isModelListener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> key<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'onUpdate:'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-extend-ç»§æ‰¿ã€åˆå¹¶"><a href="#_7-extend-ç»§æ‰¿ã€åˆå¹¶" class="header-anchor">#</a> 7.extend --- ç»§æ‰¿ã€åˆå¹¶</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> extend <span class="token operator">=</span> Object<span class="token punctuation">.</span>assign<span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-remove-ç§»é™¤æ•°ç»„ä¸­çš„ä¸€é¡¹"><a href="#_8-remove-ç§»é™¤æ•°ç»„ä¸­çš„ä¸€é¡¹" class="header-anchor">#</a> 8.remove --- ç§»é™¤æ•°ç»„ä¸­çš„ä¸€é¡¹</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_9-hasownproperty-åˆ¤æ–­æ˜¯å¦å¯¹è±¡æœ¬èº«æ‹¥æœ‰çš„å±æ€§"><a href="#_9-hasownproperty-åˆ¤æ–­æ˜¯å¦å¯¹è±¡æœ¬èº«æ‹¥æœ‰çš„å±æ€§" class="header-anchor">#</a> 9.hasOwnProperty --- åˆ¤æ–­æ˜¯å¦å¯¹è±¡æœ¬èº«æ‹¥æœ‰çš„å±æ€§</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> hasOwnProperty <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">hasOwn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_10-isarra-åˆ¤æ–­æ•°ç»„"><a href="#_10-isarra-åˆ¤æ–­æ•°ç»„" class="header-anchor">#</a> 10.isArra --- åˆ¤æ–­æ•°ç»„</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> isArray$1 <span class="token operator">=</span> Array<span class="token punctuation">.</span>isArray<span class="token punctuation">;</span>
</code></pre></div><h3 id="_11-ismap-åˆ¤æ–­æ˜¯ä¸æ˜¯mapå¯¹è±¡"><a href="#_11-ismap-åˆ¤æ–­æ˜¯ä¸æ˜¯mapå¯¹è±¡" class="header-anchor">#</a> 11.isMap --- åˆ¤æ–­æ˜¯ä¸æ˜¯Mapå¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isMap$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toTypeString$1</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Map]'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_12-isset-åˆ¤æ–­æ˜¯ä¸æ˜¯setå¯¹è±¡"><a href="#_12-isset-åˆ¤æ–­æ˜¯ä¸æ˜¯setå¯¹è±¡" class="header-anchor">#</a> 12.isSet --- åˆ¤æ–­æ˜¯ä¸æ˜¯Setå¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isSet$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toTypeString$1</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Set]'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_13-isdate-åˆ¤æ–­æ˜¯ä¸æ˜¯date-æ—¶é—´-å¯¹è±¡"><a href="#_13-isdate-åˆ¤æ–­æ˜¯ä¸æ˜¯date-æ—¶é—´-å¯¹è±¡" class="header-anchor">#</a> 13.isDate --- åˆ¤æ–­æ˜¯ä¸æ˜¯Date(æ—¶é—´)å¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isDate$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> val <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_14-isfunction-åˆ¤æ–­æ˜¯ä¸æ˜¯å‡½æ•°"><a href="#_14-isfunction-åˆ¤æ–­æ˜¯ä¸æ˜¯å‡½æ•°" class="header-anchor">#</a> 14.isFUnction --- åˆ¤æ–­æ˜¯ä¸æ˜¯å‡½æ•°</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isFunction$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_15-isstring-åˆ¤æ–­æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²"><a href="#_15-isstring-åˆ¤æ–­æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²" class="header-anchor">#</a> 15.isString --- åˆ¤æ–­æ˜¯ä¸æ˜¯å­—ç¬¦ä¸²</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isString$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_16-issymbol-åˆ¤æ–­æ˜¯ä¸æ˜¯symbol"><a href="#_16-issymbol-åˆ¤æ–­æ˜¯ä¸æ˜¯symbol" class="header-anchor">#</a> 16.isSymbol --- åˆ¤æ–­æ˜¯ä¸æ˜¯Symbol</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isSymbol</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'symbol'</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>ES6å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹Symbolï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚</p></blockquote> <h3 id="_17-isobject-åˆ¤æ–­æ˜¯ä¸æ˜¯å¯¹è±¡"><a href="#_17-isobject-åˆ¤æ–­æ˜¯ä¸æ˜¯å¯¹è±¡" class="header-anchor">#</a> 17.isObject --- åˆ¤æ–­æ˜¯ä¸æ˜¯å¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isObject$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> val <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_18-ispromise-åˆ¤æ–­æ˜¯ä¸æ˜¯promiseå¯¹è±¡"><a href="#_18-ispromise-åˆ¤æ–­æ˜¯ä¸æ˜¯promiseå¯¹è±¡" class="header-anchor">#</a> 18.isPromise --- åˆ¤æ–­æ˜¯ä¸æ˜¯Promiseå¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isPromise</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">isObject$1</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction$1</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>then<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction$1</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>catch<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>å«ä¹‰ï¼špromiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆ-- å›è°ƒå‡½æ•°å’Œæ—¶é—´ï¼Œæ›´åŠ åˆç†å’Œå¼ºå¤§ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„æ—¶é—´ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromiseæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚</p> <p>ç‰¹ç‚¹ï¼š</p> <ul><li>å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚</li> <li>ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚</li></ul> <p>ä¸‰ç§çŠ¶æ€ï¼š</p> <ul><li>pendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€</li> <li>fulfilledï¼ˆå·²æˆåŠŸï¼‰ã€</li> <li>rejectedï¼ˆå·²å¤±è´¥ï¼‰</li></ul> <p>è¯¦ç»†å¯ä»¥çœ‹ES6å®˜ç½‘ï¼šhttps://es6.ruanyifeng.com/#docs/promise</p></blockquote> <h3 id="_19-objecttostring-å¯¹è±¡è½¬å­—ç¬¦ä¸²"><a href="#_19-objecttostring-å¯¹è±¡è½¬å­—ç¬¦ä¸²" class="header-anchor">#</a> 19.objectToString --- å¯¹è±¡è½¬å­—ç¬¦ä¸²</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> objectToString$1 <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">toTypeString$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">objectToString$1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_20-torawtype-å¯¹è±¡è½¬å­—ç¬¦ä¸²-æˆªå–åå‡ ä½"><a href="#_20-torawtype-å¯¹è±¡è½¬å­—ç¬¦ä¸²-æˆªå–åå‡ ä½" class="header-anchor">#</a> 20.toRawType --- å¯¹è±¡è½¬å­—ç¬¦ä¸² æˆªå–åå‡ ä½</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">toRawType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// extract &quot;RawType&quot; from strings like &quot;[object RawType]&quot;</span>
    <span class="token keyword">return</span> <span class="token function">toTypeString$1</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_21-isplainobject-åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å¯¹è±¡"><a href="#_21-isplainobject-åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å¯¹è±¡" class="header-anchor">#</a> 21.isPlainObject --- åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isPlainObject$1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toTypeString$1</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_22-isintegerkey-åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°å­—å‹çš„å­—ç¬¦ä¸²keyå€¼"><a href="#_22-isintegerkey-åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°å­—å‹çš„å­—ç¬¦ä¸²keyå€¼" class="header-anchor">#</a> 22.isIntegerKey --- åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°å­—å‹çš„å­—ç¬¦ä¸²keyå€¼</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isIntegerKey</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">isString$1</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    key <span class="token operator">!==</span> <span class="token string">'NaN'</span> <span class="token operator">&amp;&amp;</span>
    key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'-'</span> <span class="token operator">&amp;&amp;</span>
    <span class="token string">''</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">===</span> key<span class="token punctuation">;</span>
</code></pre></div><h3 id="_23-makemap-isreservedprop"><a href="#_23-makemap-isreservedprop" class="header-anchor">#</a> 23.makeMap &amp;&amp; isReservedProp</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> isReservedProp <span class="token operator">=</span> <span class="token comment">/*#__PURE__*/</span> <span class="token function">makeMap</span><span class="token punctuation">(</span>
<span class="token comment">// the leading comma is intentional so empty string &quot;&quot; is also included</span>
<span class="token string">',key,ref,ref_for,ref_key,'</span> <span class="token operator">+</span>
    <span class="token string">'onVnodeBeforeMount,onVnodeMounted,'</span> <span class="token operator">+</span>
    <span class="token string">'onVnodeBeforeUpdate,onVnodeUpdated,'</span> <span class="token operator">+</span>
    <span class="token string">'onVnodeBeforeUnmount,onVnodeUnmounted'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">makeMap</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> expectsLowerCase</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> map <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">[</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> expectsLowerCase <span class="token operator">?</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span>map<span class="token punctuation">[</span>val<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token operator">!</span>map<span class="token punctuation">[</span>val<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote></blockquote> <p>ä¼ å…¥ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œç”Ÿæˆä¸€ä¸ªmap(é”®å€¼å¯¹)ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°æ£€æµ‹keyå€¼åœ¨ä¸åœ¨è¿™ä¸ªmapä¸­ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å°å†™é€‰å‹ã€‚</p> <h3 id="_24-cachestringfunction-ç¼“å­˜"><a href="#_24-cachestringfunction-ç¼“å­˜" class="header-anchor">#</a> 24.cacheStringFunction ç¼“å­˜</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">cacheStringFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cache <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> hit <span class="token operator">=</span> cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> hit <span class="token operator">||</span> <span class="token punctuation">(</span>cache<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_25-haschanged-æ˜¯å¦æœ‰æ”¹å˜"><a href="#_25-haschanged-æ˜¯å¦æœ‰æ”¹å˜" class="header-anchor">#</a> 25.hasChanged --- æ˜¯å¦æœ‰æ”¹å˜</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">hasChanged</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_26-invokearrayfns-æ‰§è¡Œæ•°ç»„é‡Œçš„å‡½æ•°"><a href="#_26-invokearrayfns-æ‰§è¡Œæ•°ç»„é‡Œçš„å‡½æ•°" class="header-anchor">#</a> 26.invokeArrayFns --- æ‰§è¡Œæ•°ç»„é‡Œçš„å‡½æ•°</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">invokeArrayFns</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fns<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_27-def-å®šä¹‰å¯¹è±¡"><a href="#_27-def-å®šä¹‰å¯¹è±¡" class="header-anchor">#</a> 27.def --- å®šä¹‰å¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">def</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        value
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Object.definePropertyå¯ä»¥è¯´æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„APIï¼ˆä¸ºä»€ä¹ˆå‘¢?æˆ‘è¿˜ä¸çŸ¥é“ï¼‰ã€‚</p> <p>Object.defineProperty()æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚</p> <p>æ³¨ï¼šåº”å½“ç›´æ¥åœ¨Objectæ„é€ å™¨å¯¹è±¡ä¸Šè°ƒç”¨æ­¤æ–¹æ³•ï¼Œ è€Œä¸æ˜¯åœ¨ä»»æ„ä¸€ä¸ªObjectç±»å‹çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚</p> <p>è¯¦ç»†å¯çœ‹ES6å®˜ç½‘ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty</p></blockquote> <h3 id="_28-tonumber-è½¬æ¢ä¸ºæ•°å­—"><a href="#_28-tonumber-è½¬æ¢ä¸ºæ•°å­—" class="header-anchor">#</a> 28.toNumber ---è½¬æ¢ä¸ºæ•°å­—</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">toNumber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">?</span> val <span class="token operator">:</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_29-getglobalthis-å…¨å±€å¯¹è±¡"><a href="#_29-getglobalthis-å…¨å±€å¯¹è±¡" class="header-anchor">#</a> 29.getGlobalThis --- å…¨å±€å¯¹è±¡</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> _globalThis<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getGlobalThis</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>_globalThis <span class="token operator">||</span>
        <span class="token punctuation">(</span>_globalThis <span class="token operator">=</span>
            <span class="token keyword">typeof</span> globalThis <span class="token operator">!==</span> <span class="token string">'undefined'</span>
                <span class="token operator">?</span> globalThis
                <span class="token operator">:</span> <span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span>
                    <span class="token operator">?</span> self
                    <span class="token operator">:</span> <span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span>
                        <span class="token operator">?</span> window
                        <span class="token operator">:</span> <span class="token keyword">typeof</span> global <span class="token operator">!==</span> <span class="token string">'undefined'</span>
                            <span class="token operator">?</span> global
                            <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ€»ç»“ä¸æœŸæœ›"><a href="#æ€»ç»“ä¸æœŸæœ›" class="header-anchor">#</a> æ€»ç»“ä¸æœŸæœ›</h2> <p>ä¸€å‘¨ä¸‰æ¬¡è¯»æºç ä»»åŠ¡èµ¶åœ¨äº†å‘¨æ—¥çš„æ™šä¸Šåç‚¹å¤šå®Œæˆï¼Œè¿˜æ˜¯æœ‰ç‚¹æ‰æ€¥çš„ã€‚ä¸è¿‡è¿˜æ˜¯å­¦åˆ°äº†ä¸€äº›æ–°ä¸œè¥¿ï¼Œå¯¹æºç ä¹Ÿæœ‰äº†æ›´æ·±çš„äº†è§£ï¼Œå†æèµ·æºç çš„æ—¶å€™ä¹Ÿä¸ä¼šæœ‰ç•æƒ§å¿ƒé‡Œã€‚å”¯ä¸€ä¸è¶³çš„æ˜¯ï¼Œè¿˜æ˜¯æœ‰ç‚¹èµ¶ï¼Œå¹¶æ²¡æœ‰è¿˜è®¤çœŸçš„å»ä¸“ç ”å…¶ä¸­çš„ä¸€äº›æ€æƒ³å’Œå†™ä»£ç çš„æ€è·¯ã€‚æš‚æ—¶æ²¡æ³•å°†è¿™äº›ä¸œè¥¿ï¼Œä¸é¡¹ç›®ç›¸èåˆã€‚</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/tree-blod/assets/js/app.c79a225f.js" defer></script><script src="/tree-blod/assets/js/2.6ca15a82.js" defer></script><script src="/tree-blod/assets/js/13.a492b3c4.js" defer></script>
  </body>
</html>
