<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>validate-npm-package-name | æ ‘ä¹‹æœ¨</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="never give up">
    
    <link rel="preload" href="/tree-blod/assets/css/0.styles.12565279.css" as="style"><link rel="preload" href="/tree-blod/assets/js/app.c79a225f.js" as="script"><link rel="preload" href="/tree-blod/assets/js/2.6ca15a82.js" as="script"><link rel="preload" href="/tree-blod/assets/js/11.3fb9b15d.js" as="script"><link rel="prefetch" href="/tree-blod/assets/js/10.013edf68.js"><link rel="prefetch" href="/tree-blod/assets/js/12.7d9d1341.js"><link rel="prefetch" href="/tree-blod/assets/js/13.a492b3c4.js"><link rel="prefetch" href="/tree-blod/assets/js/3.98ae3056.js"><link rel="prefetch" href="/tree-blod/assets/js/4.4466df2d.js"><link rel="prefetch" href="/tree-blod/assets/js/5.02018b5a.js"><link rel="prefetch" href="/tree-blod/assets/js/6.bd7b0c2a.js"><link rel="prefetch" href="/tree-blod/assets/js/7.2c2a7d27.js"><link rel="prefetch" href="/tree-blod/assets/js/8.c02ba4af.js"><link rel="prefetch" href="/tree-blod/assets/js/9.02d545b6.js">
    <link rel="stylesheet" href="/tree-blod/assets/css/0.styles.12565279.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tree-blod/" class="home-link router-link-active"><!----> <span class="site-name">æ ‘ä¹‹æœ¨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/vue/" class="nav-link">
  vue.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/node/" class="nav-link">
  node.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/npm/" class="nav-link router-link-active">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/react/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/js/" class="nav-link">
  javascript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="åç«¯" class="mobile-dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/spring/" class="nav-link">
  spring
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/dbase/" class="nav-link">
  æ•°æ®åº“
</a></div><div class="nav-item"><a href="/tree-blod/algorithm/" class="nav-link">
  æ•°æ®ç»“æ„å’Œç®—æ³•
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯" class="mobile-dropdown-title"><span class="title">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/vue/" class="nav-link">
  vue.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/node/" class="nav-link">
  node.js
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/npm/" class="nav-link router-link-active">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/react/" class="nav-link">
  React
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/js/" class="nav-link">
  javascript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åç«¯" class="dropdown-title"><span class="title">åç«¯</span> <span class="arrow down"></span></button> <button type="button" aria-label="åç«¯" class="mobile-dropdown-title"><span class="title">åç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tree-blod/java/" class="nav-link">
  java
</a></li><li class="dropdown-item"><!----> <a href="/tree-blod/spring/" class="nav-link">
  spring
</a></li></ul></div></div><div class="nav-item"><a href="/tree-blod/dbase/" class="nav-link">
  æ•°æ®åº“
</a></div><div class="nav-item"><a href="/tree-blod/algorithm/" class="nav-link">
  æ•°æ®ç»“æ„å’Œç®—æ³•
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="validate-npm-package-name"><a href="#validate-npm-package-name" class="header-anchor">#</a> validate-npm-package-name</h1> <p>å­¦ä¹ äººï¼šæœ¨æœ¨</p> <p>å­¦ä¹ æ—¶é—´ğŸ“…: 2022.01.04 11:13:21</p> <p>å­¦ä¹ åœ°å€ï¼š</p> <p>æ¦‚è¿°ï¼š</p> <ol><li>äº†è§£ validate-npm-package-nameçš„ä½¿ç”¨åœºæ™¯å’Œä½œç”¨ï¼›</li> <li>é˜…è¯»æºç å†…å®¹ã€‚</li></ol> <p>è¡¥å……ï¼š</p> <ul><li>nodeæºç ä»“åº“åœ°å€ï¼šhttps://github.com/npm</li> <li>vueæºç ä»“åº“åœ°å€ï¼šhttps://github1s.com/vuejs/vuex</li></ul> <h2 id="ä½¿ç”¨åœºæ™¯å’Œä½œç”¨"><a href="#ä½¿ç”¨åœºæ™¯å’Œä½œç”¨" class="header-anchor">#</a> ä½¿ç”¨åœºæ™¯å’Œä½œç”¨</h2> <h3 id="å¦‚ä½•æŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ä¸­åŠ è½½çš„æºç æ–‡ä»¶"><a href="#å¦‚ä½•æŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ä¸­åŠ è½½çš„æºç æ–‡ä»¶" class="header-anchor">#</a> å¦‚ä½•æŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ä¸­åŠ è½½çš„æºç æ–‡ä»¶ï¼Ÿ</h3> <ol><li><p>è¿›å…¥å·²ç»åˆ›å»ºå¥½çš„é¡¹ç›®ä¸­ï¼ŒæŸ¥çœ‹package.jsonçš„æ–‡ä»¶ï¼›</p></li> <li><p>åœ¨scriptsä¸Šç‚¹å‡»è°ƒè¯•ï¼Œç‚¹å‡»buildï¼ˆå¦‚å›¾-1ï¼‰ï¼›</p> <p><img src="C:%5CUsers%5CPOET%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220104150048908.png" alt="image-20220104150048908"></p> <p>â€‹																							å›¾-1 package.jsonæ–‡ä»¶</p></li> <li><p>é€šè¿‡å‘½ä»¤ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>cd .. 
</code></pre></div><p>ï¼ˆè®°å¾—cdå’Œ..ç›´æ¥æœ‰ä¸ªç©ºæ ¼ï¼‰é€€å‡ºå½“å‰æ–‡ä»¶ï¼›</p></li> <li><p>è¾“å…¥å‘½ä»¤ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>vue create project-name
</code></pre></div><p>é€‰æ‹©vueçš„ç‰ˆæœ¬åæ‰“å¼€è°ƒè¯•çª—å£ï¼ˆå¦‚å›¾-2ï¼‰ã€‚å¯ä»¥çœ‹åˆ°åœ¨å·²è½½å…¥çš„è„šæœ¬ä¸­å‡ºç°äº†ä¸€ä¸ªcraete.jsçš„æºç æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬åœ¨åˆ›å»ºé¡¹ç›®ä¸­èµ·ä½œç”¨çš„å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶ã€‚</p> <p><img src="C:%5CUsers%5CPOET%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220104145920858.png" alt="image-20220104145920858"></p> <p>â€‹																							å›¾-2 è°ƒè¯•çŠ¶æ€ä¸‹åŠ è½½çš„æºæ–‡ä»¶</p></li></ol> <h3 id="ä½¿ç”¨åœºæ™¯å’Œä½œç”¨æ€»ç»“"><a href="#ä½¿ç”¨åœºæ™¯å’Œä½œç”¨æ€»ç»“" class="header-anchor">#</a> ä½¿ç”¨åœºæ™¯å’Œä½œç”¨æ€»ç»“</h3> <p>**ä½¿ç”¨åœºæ™¯ï¼š**é€šè¿‡æŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ä¸­åŠ è½½çš„æºç æ–‡ä»¶è¿™ä¸€è¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ä¼šç”¨åˆ°validate-npm-package-nameè¿™ä¸ªåŒ…ã€‚</p> <p>**ä½œç”¨ï¼š**validate-npm-package-nameè¿™ä¸ªåŒ…ï¼Œé¡¾åæ€ä¹‰ï¼šéªŒè¯npmåŒ…åç§°ã€‚æˆ‘ä»¬åœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼ŒéªŒè¯æˆ‘ä»¬å®šä¹‰çš„é¡¹ç›®åæ˜¯å¦åˆæ³•ã€‚</p> <h2 id="å‘½åè§„åˆ™"><a href="#å‘½åè§„åˆ™" class="header-anchor">#</a> å‘½åè§„åˆ™</h2> <ul><li>çœ‹ä¸‹é¢æºç å¤‡æ³¨</li></ul> <h2 id="æºç ç†è§£"><a href="#æºç ç†è§£" class="header-anchor">#</a> æºç ç†è§£</h2> <p>æºç ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// å¯¼å‡ºvalidateçš„åŒ…</span>
<span class="token keyword">var</span> validate <span class="token operator">=</span> module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 <span class="token keyword">var</span> warnings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

 <span class="token keyword">var</span> errors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>


 <span class="token comment">// 1.å®šä¹‰å‘½åè§„åˆ™</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name cannot be null'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>warnings<span class="token punctuation">,</span> errors<span class="token punctuation">)</span>

 <span class="token punctuation">}</span>

 <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name cannot be undefined'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>warnings<span class="token punctuation">,</span> errors<span class="token punctuation">)</span>

 <span class="token punctuation">}</span>

 <span class="token comment">// åç§°å¿…é¡»ä¸ºå­—ç¬¦ä¸²</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name must be a string'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>warnings<span class="token punctuation">,</span> errors<span class="token punctuation">)</span>

 <span class="token punctuation">}</span>

 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name length must be greater than zero'</span><span class="token punctuation">)</span>

 <span class="token punctuation">}</span>

<span class="token comment">//ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\.</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name cannot start with a period'</span><span class="token punctuation">)</span>

 <span class="token punctuation">}</span>

 <span class="token comment">// ä¸èƒ½ä»¥_ï¼ˆä¸‹åˆ’çº¿ï¼‰å¼€å¤´</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^_</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name cannot start with an underscore'</span><span class="token punctuation">)</span>

 <span class="token punctuation">}</span>

 <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name cannot contain leading or trailing spaces'</span><span class="token punctuation">)</span>

 <span class="token punctuation">}</span>
 
 <span class="token comment">// é”™è¯¯ä¿¡æ¯</span>
  blacklist<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">blacklistedName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> blacklistedName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>blacklistedName <span class="token operator">+</span> <span class="token string">' is a blacklisted name'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Generate warnings for stuff that used to be allowed</span>

  <span class="token comment">// npmä¸­çš„æ ¸å¿ƒåŒ…åä¸€è‡´</span>
  builtins<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">builtin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> builtin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      warnings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>builtin <span class="token operator">+</span> <span class="token string">' is a core module name'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// really-long-package-names-------------------------------such--length-----many---wow</span>
  <span class="token comment">// é•¿åº¦ä¸èƒ½è¶…è¿‡214</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">214</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    warnings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name can no longer contain more than 214 characters'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// mIxeD CaSe nAMEs</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    warnings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name can no longer contain capital letters'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

 <span class="token comment">// ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[~'!()*]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    warnings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name can no longer contain special characters (&quot;~\'!()*&quot;)'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// ä¸èƒ½è·ŸåŒ…åä¸€è‡´</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">!==</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Maybe it's a scoped package name, like @user/package</span>
    <span class="token keyword">var</span> nameMatch <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>scopedPackagePattern<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nameMatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> user <span class="token operator">=</span> nameMatch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token keyword">var</span> pkg <span class="token operator">=</span> nameMatch<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">===</span> user <span class="token operator">&amp;&amp;</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>pkg<span class="token punctuation">)</span> <span class="token operator">===</span> pkg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>warnings<span class="token punctuation">,</span> errors<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    errors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'name can only contain URL-friendly characters'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>warnings<span class="token punctuation">,</span> errors<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

validate<span class="token punctuation">.</span>scopedPackagePattern <span class="token operator">=</span> scopedPackagePattern

<span class="token keyword">var</span> <span class="token function-variable function">done</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">warnings<span class="token punctuation">,</span> errors</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> errors<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> warnings<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> errors<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">warnings</span><span class="token operator">:</span> warnings<span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> errors
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>warnings<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">delete</span> result<span class="token punctuation">.</span>warnings
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">delete</span> result<span class="token punctuation">.</span>errors
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="header-anchor">#</a> æµ‹è¯•</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'use strict'</span>

<span class="token keyword">var</span> validate <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'..'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tap'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>test

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'validate-npm-package-name'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Traditional</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'some-package'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'example.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'under_score'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'period.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'123numeric'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'crazy!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name can no longer contain special characters (&quot;~\'!()*&quot;)'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Scoped (npm 2+)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'@npm/thingy'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'@npm-zors/money!time.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name can no longer contain special characters (&quot;~\'!()*&quot;)'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Invalid</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name length must be greater than zero'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name length must be greater than zero'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'.start-with-period'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name cannot start with a period'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'_start-with-underscore'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name cannot start with an underscore'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'contain:colons'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name can only contain URL-friendly characters'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">' leading-space'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name cannot contain leading or trailing spaces'</span><span class="token punctuation">,</span> <span class="token string">'name can only contain URL-friendly characters'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'trailing-space '</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name cannot contain leading or trailing spaces'</span><span class="token punctuation">,</span> <span class="token string">'name can only contain URL-friendly characters'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'s/l/a/s/h/e/s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name can only contain URL-friendly characters'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules is a blacklisted name'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'favicon.ico'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'favicon.ico is a blacklisted name'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Node/IO Core</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'http is a core module name'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Long Package Names</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'ifyouwanttogetthesumoftwonumberswherethosetwonumbersarechosenbyfindingthelargestoftwooutofthreenumbersandsquaringthemwhichismultiplyingthembyitselfthenyoushouldinputthreenumbersintothisfunctionanditwilldothatforyou-'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name can no longer contain more than 214 characters'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'ifyouwanttogetthesumoftwonumberswherethosetwonumbersarechosenbyfindingthelargestoftwooutofthreenumbersandsquaringthemwhichismultiplyingthembyitselfthenyoushouldinputthreenumbersintothisfunctionanditwilldothatforyou'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Legacy Mixed-Case</span>

  t<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token string">'CAPITAL-LETTERS'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">validForNewPackages</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">validForOldPackages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name can no longer contain capital letters'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  t<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/tree-blod/assets/js/app.c79a225f.js" defer></script><script src="/tree-blod/assets/js/2.6ca15a82.js" defer></script><script src="/tree-blod/assets/js/11.3fb9b15d.js" defer></script>
  </body>
</html>
